#!/bin/bash

if [ $# != 2 ]
then
  echo "Usage: ./generate-event <write_key> <end_point>"
  echo "Example: ./generate-event 1S0ibSaDlSSGkaQuHLi9feJqIUBNAE https://<data_plane_url>/v1/batch"
  exit
fi

USERID=$(LC_CTYPE=C tr -dc A-Za-z0-9 < /dev/urandom | head -c 16 | xargs)
echo $USERID
POSTBODY=$(cat batch1.json | sed 's/49e4bdd1c280bc00/'$USERID'/')

#curl -u $1: -X POST http://$2:8080/v1/track -d @track.json --header "Content-Type: application/json"
#curl -u $1: -X POST $2 -d @track.json --header "Content-Type: application/json"
curl -u $1: -X POST $2 -d "$POSTBODY" --header "Content-Type: application/json"
